(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{14:function(e,t,n){},16:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),o=n(8),r=n.n(o),s=(n(14),n(2)),c=n(3),l=n(5),u=n(4),h=n(6),d=n(1),p=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={cabotPlaces:[],inputVal:"",showMenu:!1},n.filterLocations=n.filterLocations.bind(Object(d.a)(Object(d.a)(n))),n.toggleSuggestions=n.toggleSuggestions.bind(Object(d.a)(Object(d.a)(n))),n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentWillMount",value:function(){this.setState({cabotPlaces:this.props.cabotPlaces})}},{key:"toggleSuggestions",value:function(){this.setState({showMenu:!this.state.showMenu})}},{key:"filterLocations",value:function(e){this.props.minimizeMarker();var t=document.getElementById("search-input").value,n=t.toUpperCase(),a=[];this.props.cabotPlaces.forEach(function(e){e.fullName.toUpperCase().indexOf(n)>-1?(e.marker.setVisible(!0),a.push(e)):e.marker.setVisible(!1)}),this.setState({cabotPlaces:a,inputVal:t})}},{key:"render",value:function(){var e=this,t=this.state.cabotPlaces.map(function(t,n){return i.a.createElement("li",{key:n,role:"button",className:"list-item",tabIndex:"0",onKeyPress:e.props.openmarker.bind(e,t.marker),onClick:e.props.openmarker.bind(e,t.marker)},t.fullName)},this);return i.a.createElement("div",{className:"search-menu"},i.a.createElement("div",{className:"button",onClick:this.toggleSuggestions},i.a.createElement("h1",{className:"app-title"}," Visit Cabot! "),i.a.createElement("small",null,"Click to ",this.state.showMenu?"hide":"see"," Suggestions!")),i.a.createElement("input",{role:"search","aria-labelledby":"Search",id:"search-input",type:"text",placeholder:"Search Suggestions",value:this.state.inputVal,onChange:this.filterLocations}),i.a.createElement("ul",{className:"locations-list"},this.state.showMenu&&t))}}]),t}(a.Component);var m="&client_id=2WN2LW0H3PTZ5ANP5B2P1ZPF0JIDBWZNPHXPBDZIRPJVGPJQ",g=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={cabotPlaces:[],map:"",currentMarker:"",previousMarker:""},n.initMap=n.initMap.bind(Object(d.a)(Object(d.a)(n))),n.openmarker=n.openmarker.bind(Object(d.a)(Object(d.a)(n))),n.minimizeMarker=n.minimizeMarker.bind(Object(d.a)(Object(d.a)(n))),n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentWillMount",value:function(){this.setState({cabotPlaces:[{name:"The Purple Onion",description:"Restaurant",latitude:34.955031,longitude:-92.007987,streetAddress:"1101 S Pine St, Cabot, AR 72023"},{name:"Allfam Bowling & Entertainment Center",description:"Bowling",latitude:34.941082,longitude:-92.049554,streetAddress:"2350 Lakewood Dr, Cabot, AR 72023"},{name:"Silver Screen Cinema 8",description:"Movie Theater",latitude:34.97754,longitude:-92.024227,streetAddress:"100 Cinema Blvd, Cabot, AR 72023"},{name:"Grinds Coffee Co",description:"Coffee Shop",latitude:34.944463,longitude:-92.009152,streetAddress:"8177, 1904 S Pine St ste a, Cabot, AR 72023"},{name:"Walmart Neighborhood Market",description:"Grocery Store",latitude:34.953394,longitude:-92.00702,streetAddress:"1203 S Pine St, Cabot, AR 72023"}]})}},{key:"componentDidMount",value:function(){window.initMap=this.initMap}},{key:"initMap",value:function(){var e=this,t=document.getElementById("map");t.style.height=window.innerHeight+"px";var n=new window.google.maps.Map(t,{zoom:13,mapTypeControl:!1,fullscreenControl:!1,center:{lat:34.963541,lng:-92.02244}});window.google.maps.event.addDomListener(window,"resize",function(){window.google.maps.event.trigger(n,"resize"),e.state.map.setCenter(n.getCenter())}),window.google.maps.event.addListener(n,"click",function(){e.minimizeMarker()});var a=new window.google.maps.InfoWindow({});window.google.maps.event.addListener(a,"closeclick",function(){e.minimizeMarker()}),this.setState({map:n,currentMarker:a}),this.getAllLocationsInfo()}},{key:"getAllLocationsInfo",value:function(){var e=this,t=this,n=[];this.state.cabotPlaces.forEach(function(a){var i=a.name+" - "+a.description;a.fullName=i,a.display=!0;var o=a.latitude,r=a.longitude;fetch("https://api.foursquare.com/v2/venues/search?"+m+"&client_secret=TQNTS32NRFWBI4WLBB5CMZX4C2VOVX4PNN3BYC3ZSKS2LVAA&v=20181115&ll="+o+","+r+"&limit=1").then(function(i){200!==i.status?(a.getDetailsError=i,n.push(a)):i.json().then(function(i){a.id=i.response.venues[0].id;var o=new window.google.maps.Marker({animation:window.google.maps.Animation.DROP,position:new window.google.maps.LatLng(a.latitude,a.longitude),map:e.state.map,id:i.response.venues[0].id});o.addListener("click",function(){t.openmarker(o)}),a.marker=o,e.getVenueDetails(a,n)})}).catch(function(e){console.log(e),a.getDetailsError=e,n.push(a)})}),this.setState({cabotPlaces:n})}},{key:"getVenueDetails",value:function(e,t){var n="https://api.foursquare.com/v2/venues/"+e.id+"?"+m+"&client_secret=TQNTS32NRFWBI4WLBB5CMZX4C2VOVX4PNN3BYC3ZSKS2LVAA&v=20181115";fetch(n).then(function(n){200!==n.status?(e.getDetailsError=n,t.push(e)):n.json().then(function(n){(n=n.response.venue).bestPhoto&&(e.img=n.bestPhoto.prefix+"100x100"+n.bestPhoto.suffix),e.hereNow=n.hereNow.summary,e.rating=(n.likes.summary?n.likes.summary+", ":"No likes, ")+(n.rating?n.rating+"/10 stars.":"No stars."),e.url=n.shortUrl,t.push(e)})}).catch(function(n){console.log(n),e.getDetailsError=n,t.push(e)})}},{key:"openmarker",value:function(e){this.minimizeMarker(),e.setAnimation(window.google.maps.Animation.BOUNCE),this.setState({previousMarker:e}),this.state.currentMarker.setContent("Loading SquareSpace Data..."),this.state.map.setCenter(e.getPosition()),this.state.map.panBy(0,-230),this.displayMarker(e),this.state.currentMarker.open(this.state.map,e)}},{key:"displayMarker",value:function(e){var t=[];if(this.state.cabotPlaces.forEach(function(n){n.id===e.id&&t.push(n)}),(t=t[0]).getDetailsError)this.state.currentMarker.setContent("We were unable to retrieve details of this location.");else{var n='<h2 class="location-text">'+t.name+"</h2>",a='<span class="location-text">'+t.rating+"</span><hr/>",i=t.img?'<img src="'+t.img+'"alt="'+t.name+"'s most popular photo\" /><br>":"<span> No Image for this Venue </span><br>",o="<b>Current Visitors: </b>"+t.hereNow+"<hr/>",r='<a href="'+t.url+'" target="_blank">Check it out on FourSquare!</a> ';this.state.currentMarker.setContent(n+i+a+o+r)}}},{key:"minimizeMarker",value:function(){this.state.previousMarker&&this.state.previousMarker.setAnimation(null),this.state.currentMarker&&this.state.currentMarker.close(),this.setState({previousMarker:""})}},{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement(p,{key:"100",cabotPlaces:this.state.cabotPlaces,openmarker:this.openmarker,minimizeMarker:this.minimizeMarker}),i.a.createElement("div",{id:"map","aria-labelledby":"Map"}))}}]),t}(a.Component),f=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function v(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}r.a.render(i.a.createElement(g,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/Neighborhood-Map",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("/Neighborhood-Map","/service-worker.js");f?(function(e,t){fetch(e).then(function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):v(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")})):v(t,e)})}}()},9:function(e,t,n){e.exports=n(16)}},[[9,2,1]]]);
//# sourceMappingURL=main.996fe903.chunk.js.map